<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Comic Sans MS" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600986 (zh-CN, DDL); Windows/6.1.1 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: Comic Sans MS;
      font-size: 18pt;
    }
  </style>
</head>
<body>
<a name="497"/>

<div>
<span><div><font style="font-family: &quot;Comic Sans MS&quot;; font-size: 18pt;">小组项目之房天下</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font style="font-family: &quot;Comic Sans MS&quot;; font-size: 18pt;">技术路线</font></div><div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 293px;"></col><col style="width: 298px;"></col></colgroup><tbody><tr><td style="width: 293px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">爬虫</font></div></td><td style="width: 298px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">requests获取网页</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">pyquery找信息</font></div></td></tr><tr><td style="width: 293px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">写csv文件</font></div></td><td style="width: 298px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">csv</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">os操作</font></div></td></tr></tbody></table><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><img src="YinXiangBiJi.enex_files/Image.png" type="image/png" data-filename="Image.png"/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font style="font-family: &quot;Comic Sans MS&quot;; font-size: 18pt;">函数介绍：</font></div><div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 165px;"></col><col style="width: 709px;"></col><col style="width: 717px;"></col></colgroup><tbody><tr><td style="width: 165px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">FangHTMLDl</font></div></td><td style="width: 709px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">抓取网页全部内容</font></div></td><td style="width: 717px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">编码原采用<span style="white-space: pre;"><span style="line-height: 19px; color: rgb(70, 70, 70);">r.encoding = r.apparent_encoding</span></span></font></div><div><span style="white-space: pre;"><span style="line-height: 19px; color: rgb(70, 70, 70);"><font face="Comic Sans MS" style="font-size: 12pt;">但是会出现乱码问题，替代为gb2312还是不行</font></span></span></div><div><span style="white-space: pre;"><span style="line-height: 19px; color: rgb(70, 70, 70);"><font face="Comic Sans MS" style="font-size: 12pt;">所以最终替代为gbk</font></span></span></div><div><span style="white-space: pre;"><span style="line-height: 19px; color: rgb(70, 70, 70);"><font face="Comic Sans MS" style="font-size: 12pt;">【房子的名称经常会出现生僻字，包括平方米的表示也非常特殊】</font></span></span></div><div><span style="color: rgb(70, 70, 70);"><font face="Comic Sans MS" style="font-size: 12pt;"><img src="YinXiangBiJi.enex_files/Image [1].png" type="image/png" data-filename="Image.png"/></font></span></div></td></tr><tr><td style="width: 165px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">BaseExtractor</font></div></td><td style="width: 709px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">基类</font></div></td><td style="width: 717px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div></td></tr><tr><td style="width: 165px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">FangNavExt</font></div></td><td style="width: 709px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">子类</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">返回所有导航栏链接</font></div></td><td style="width: 717px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">导航栏下有非常多的a标签，报期其他地区的。</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">计算机不能帮我们判断哪一个是北京地区的，所以我们这里手动创建一个list进行筛选</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><img src="YinXiangBiJi.enex_files/Image [2].png" type="image/png" data-filename="Image.png"/></font></div></td></tr><tr><td style="width: 165px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">FangPageExt</font></div></td><td style="width: 709px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">子类</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">返回所有额外的page链接，如果没有额外的page，则返回空list</font></div></td><td style="width: 717px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">返回额外的page的链接</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><img src="YinXiangBiJi.enex_files/Image [3].png" type="image/png" data-filename="Image.png"/></font></div></td></tr><tr><td style="width: 165px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">FangMsgExt</font></div></td><td style="width: 709px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">子类</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">返回list信息（直接获取页面中信息，对于地址过长的信息不能够全面地获取）</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div></td><td style="width: 717px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">编码问题在一开始得到解决</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><img src="YinXiangBiJi.enex_files/Image [4].png" type="image/png" data-filename="Image.png"/></font></div></td></tr><tr><td style="width: 165px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">GetNav</font></div></td><td style="width: 709px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">获取导航栏函数</font></div></td><td rowspan="3" style="height: 92px; width: 717px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">结构类似</font></div></td></tr><tr><td style="width: 165px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">GetPage</font></div></td><td style="width: 709px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">获取page links函数</font></div></td></tr><tr><td style="width: 165px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">GetInfo</font></div></td><td style="width: 709px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">获取页面信息函数</font></div></td></tr><tr><td style="width: 165px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">主体部分</font></div></td><td style="width: 709px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;"><img src="YinXiangBiJi.enex_files/Image [5].png" type="image/png" data-filename="Image.png"/></font></div></td><td style="width: 717px; padding: 8px; border: 1px solid;"><div><font face="Comic Sans MS" style="font-size: 12pt;">三个部分循环共计两重</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">第一重获取导航栏链接，得到所有地区的链接</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">第二重循环：</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">第一个循环根据获取的地区链接获取额外的page的链接</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">得到page_links（主要页面的链接和额外的页面的链接）</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">第二个循环根据第一个循环中得到的page_links获取楼盘详细信息</font></div></td></tr></tbody></table><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div></div><div><font face="Comic Sans MS" style="font-size: 12pt;">Q：为什么没有进入到详情页面获取信息？</font></div><div><font face="Comic Sans MS" style="font-size: 12pt;"><br/></font></div><div><font face="Comic Sans MS" style="font-size: 12pt;">发现网页链接是需要js加载的，考虑到在主页已经能够获取足够的信息，所以不再进入详情页抓取信息</font></div><div><br/></div></span>
</div></body></html> 